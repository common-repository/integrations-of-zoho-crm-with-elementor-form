var $=Object.defineProperty;var S=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var _=(t,a,s)=>a in t?$(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,w=(t,a)=>{for(var s in a||(a={}))B.call(a,s)&&_(t,s,a[s]);if(S)for(var s of S(a))O.call(a,s)&&_(t,s,a[s]);return t};import{j as e,r as l,_ as P,L as F}from"./index-1.0.6.js";import{L as p,u as R,_ as r,S as T,b as j,a as g,c as V,C as Z,T as G,N as U,M as Y}from"./bi-910-9.js";import{E as q,T as J}from"./bi-251-16.js";function K({size:t=30,stroke:a=2}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 30 30",children:[e.jsx("ellipse",{className:"svg-icn",strokeWidth:a,strokeMiterlimit:"10",cx:"15",cy:"15",rx:"11",ry:"11.09"}),e.jsx("ellipse",{className:"svg-icn",strokeWidth:2,strokeMiterlimit:"10",cx:"15",cy:"11",rx:"1",ry:"1"}),e.jsx("line",{className:"svg-icn",strokeWidth:a-.5,strokeLinecap:"round",strokeLinejoin:"round",x1:"15",y1:"18",x2:"15",y2:"21.72"})]})}function Q({size:t}){return e.jsxs("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 215 215",children:[e.jsx("rect",{className:"cls-1",fill:"none",strokeWidth:"16",stroke:"currentColor",strokeMiterlimit:"10",x:"19.91",y:"20.9",width:"174",height:"174",rx:"85"}),e.jsx("path",{fill:"currentColor",className:"cls-2",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"4",d:"M138.3,151.06,99.23,113.52a6,6,0,0,1-1.85-4.34V56.47a6,6,0,0,1,6-6h0a6,6,0,0,1,6,6v47.59a6,6,0,0,0,1.85,4.33l35.37,34a6,6,0,0,1,.17,8.51h0A6,6,0,0,1,138.3,151.06Z"})]})}function X(t){const a=l.useRef(null),s=l.useRef(null),[d,f]=l.useState(!1),x=i=>{d&&a.current&&!a.current.contains(i.target)&&f(!1),document.removeEventListener("click",x)};return l.useEffect(()=>{s.current.parentNode.parentNode.parentNode.style.zIndex=d?"10":"auto",d||s.current.blur(),document.addEventListener("click",x)},[d]),e.jsxs("div",{className:"btcd-menu",children:[e.jsx("button",{ref:s,className:"btcd-menu-btn btcd-mnu sh-sm",onClick:()=>f(i=>!i),"aria-label":"toggle menu",type:"button"}),e.jsxs("div",{ref:a,className:`btcd-menu-list ${d?"btcd-m-a":""}`,children:[e.jsxs(p,{to:`/flow/action/info/${t.id}/${t.name}`,type:"button",className:"flx","aria-label":"actions",children:[e.jsx(K,{size:16}),"  Info"]}),e.jsxs(p,{to:`/flow/action/log/${t.id}/${t.name}`,type:"button",className:"flx","aria-label":"actions",children:[e.jsx(Q,{size:16}),"  Timeline"]}),e.jsxs(p,{to:`/flow/action/edit/${t.id}`,type:"button",className:"flx","aria-label":"actions",children:[e.jsx(q,{size:16}),"  Edit"]}),e.jsxs("button",{type:"button","aria-label":"actions",className:"flx",onClick:t.del,children:[e.jsx(J,{size:16}),"  Delete"]})]})]})}const ee=l.lazy(()=>P(()=>import("./bi-336-15.js"),["./bi-336-15.js","./index-1.0.6.js","./bi-910-9.js","./bi-204-21.css"],import.meta.url));function te(){var M;const{data:t,isLoading:a}=R({payload:{},action:"flow/list",method:"get"}),[s,d]=l.useState(!a&&t.success&&((M=t==null?void 0:t.data)!=null&&M.integrations)?t.data.integrations:[]),[f,x]=l.useState({show:!1}),[i,y]=l.useState({show:!1,btnTxt:""}),[k,L]=l.useState({show:!1,msg:""}),[N,I]=l.useState([{width:250,minWidth:80,Header:r("Trigger"),accessor:"triggered_entity"},{width:250,minWidth:80,Header:r("Action Name"),accessor:"name"},{width:200,minWidth:200,Header:r("Created At"),accessor:"created_at"},{width:70,minWidth:60,Header:r("Status"),accessor:"status",Cell:o=>e.jsx(T,{className:"flx",action:n=>C(n,o.row.original.id),checked:Number(o.row.original.status)===1})}]);l.useEffect(()=>{var o;!a&&t.success&&((o=t==null?void 0:t.data)!=null&&o.integrations)&&d(t.data.integrations)},[t]),l.useEffect(()=>{const o=N.filter(n=>n.accessor!=="t_action"&&n.accessor!=="status");o.push({width:70,minWidth:60,Header:r("Status"),accessor:"status",Cell:n=>e.jsx(T,{className:"flx",action:u=>C(u,n.row.original.id),checked:Number(n.row.original.status)===1})}),o.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:n=>e.jsx(X,{id:n.row.original.id,name:n.row.original.name,index:n.row.id,del:()=>A(n.row.original.id,n.row.index)})}),I([...o])},[s]);const C=(o,n)=>{const u=o.target.checked,h=[...s],c=h.find(m=>m.id===n);c.status=u===!0?"1":"0",d(h),j({id:n,status:u},"flow/toggleStatus").then(m=>{g.success(r(m.data))}).catch(()=>{g.error(r("Something went wrong"))})},W=(o,n)=>{const u=j({id:o},"flow/delete").then(h=>{if(h.success){const c=[...s];return c.splice(n,1),d(c),"Integration deleted successfully"}return h.data});g.promise(u,{success:h=>h,error:r("Error Occurred"),loading:r("delete...")})},E=l.useCallback(o=>{const n=[],u=[];for(let c=0;c<o.length;c+=1)n.push(o[c].id),u.push(o[c].original.id);const h=j({flowID:u},"flow/bulk-delete").then(c=>{if(c.success){const b=[...s];for(let m=n.length-1;m>=0;m-=1)b.splice(Number(n[m]),1);return d(b),"Integration Deleted Successfully"}return c.data});g.promise(h,{success:c=>c,error:r("Error Occurred"),loading:r("delete...")})},[s]),D=l.useCallback(o=>{I(o)},[]),v=()=>{i.show=!1,y(w({},i))},A=(o,n)=>{i.action=()=>{W(o,n),v()},i.btnTxt=r("Delete"),i.btn2Txt=null,i.btnClass="",i.body=r("Are you sure to delete this Integration?"),i.show=!0,y(w({},i))},z={display:"flex",height:"82vh",justifyContent:"center",alignItems:"center"};if(a)return e.jsx(F,{style:z});const H=`
            <h4>Wow, Congratulations.</h4>
            <ul>
                <li>You are completing the first integrations.</li>
                <li>If you want to do <span style='color:blue' > Unlimited Integrations </span> and map all fields of the Zoho crm then you are most welcome to our pro version.</li>
                <li>We provide all fields mappable to send data zoho crm and endless number of integrations. We promise this plugin make your life easy.</li>
                <li>Get <a href="https://www.bitapps.pro/zoho-crm-with-elementor">Pro version </a> here.</li>
            </ul>`;return e.jsxs("div",{id:"all-forms",children:[e.jsx(V,{snack:f,setSnackbar:x}),e.jsx(Z,{show:i.show,body:i.body,action:i.action,close:v,btnTxt:i.btnTxt,btn2Txt:i.btn2Txt,btn2Action:i.btn2Action,btnClass:i.btnClass}),s&&(s!=null&&s.length)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"af-header flx flx-between",children:e.jsx("h2",{children:r("Integrations")})}),e.jsxs("div",{className:"forms",children:[e.jsx(G,{className:"f-table btcd-all-frm",height:250,columns:N,data:s,rowSeletable:!0,resizable:!0,columnHidable:!0,setTableCols:D,setBulkDelete:E,search:!0}),e.jsx(U,{note:H,className:"note"})]})]}):e.jsx(ee,{}),e.jsxs(Y,{sm:!0,show:k.show,setModal:()=>L({show:!1}),title:r("Premium Feature"),className:"pro-modal",children:[e.jsx("h4",{className:"txt-center mt-5",children:k.msg}),e.jsx("div",{className:"txt-center",children:e.jsx("a",{href:"https://www.bitapps.pro/bit-integrations",target:"_blank",rel:"noreferrer",children:e.jsx("button",{className:"btn btn-lg blue",type:"button",children:r("Buy Premium")})})})]})]})}var ie=l.memo(te);export{ie as default};
